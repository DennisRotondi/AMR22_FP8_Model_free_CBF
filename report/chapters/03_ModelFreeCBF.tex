\section{Model Free Control Barrier Functions}
The work in \cite{mf_cbf} proposes an approach in which a safe velocity is designed based on reduced-order kinematics, then this velocity is tracked by a velocity tracking controller. Once velocity tracking is established, enforcing safety does not require further consideration of the high-fidelity model, and this is referred to as \textit{model-free safety-critical control}.
Consider now a robotic system with configuration space $Q \subseteq \mathbb{R}^n$, configuration coordinates $\qv \in Q$, set of admissible inputs $U\subseteq \mathbb{R}^m$, control input $\uv \in U$, and dynamics:
\begin{equation} \label{eq:dynamic model}
    M(\qv)\ddot{\qv}+N(\qv,\dot{\qv})=B\uv,
\end{equation}
where $M(\qv)\in\mathbb{R}^{n \times n}$ is the inertia matrix, $N(\qv,\dot{\qv})\in\mathbb{R}^{n \times n}$ models centrifugal, Coriolis forces, and the gravity terms, and $B\in\mathbb{R}^{n \times m}$ is the input matrix.

We consider control laws $ k:Q\times \mathbb{R}^n \rightarrow \mathbb{R}^m, \uv=k(\dot{\qv},\qv)$, initial conditions $\qv(0) = \qv_0, \dot{\qv}(0)=\dot{\qv}_0$ and assume that a unique solution $\qv(t)$ exists fot all $t \geq 0$. A robotic system is considered safe if its configuration $\qv$ belongs to the safe set $\mathcal{S}$ for all times $t\geq 0$. The authors of the work \cite{mf_cbf} make the following assumption on the safe set $\mathcal{S}$.\\
\textbf{Assumption 1}. The safe set is defined as the 0-superlevel set of a continuously differentiable function $h: Q \rightarrow \mathbb{R}$:
\begin{equation} \label{eq:safe set}
    \mathcal{S} = \{\qv \in Q: h(\qv)\geq 0 \},
\end{equation}
where the gradient of $h$ is finite: $\exists C_h \in \mathbb{R}_{>0}$ such that $|| \nabla h(\qv)|| \leq C_h, \forall \qv \in \mathcal{S}$. This means that safety depends on the configuration $\qv$ only and $h$ is independent of $\dot{\qv}$.

Following \cite{mf_cbf} we want to achieve safety by generating a safe velocity. The safe velocity $\dot{\qv}_s \in \mathbb{R}^n$ needs to satisfy:
\begin{equation} \label{eq:safety constraint}
    \nabla h(\qv)\dot{\qv}_s \geq -\alpha h(\qv),
\end{equation}
for some $\alpha \in \mathbb{R}_{>0}$ to be selected. Note that (\ref{eq:safety constraint}) is a kinematic condition that does not depend on the full dynamics (\ref{eq:dynamic model}).\\
To track the safe velocity a tracking error $\dot{\ev} = \dot{\qv}-\dot{\qv}_s$ can be defined. A velocity tracking controller $\uv = k(\dot(\qv),\qv)$ is assumed to be able to drive the error $\dot(\ev)$ to zero exponentially.\\
\textbf{Assumption 2}. The velocity tracking controller $\uv = k(\dot(\qv),\qv)$ achieves exponential stable tracking: $||\dot{\ev}(t)||\leq K ||\dot{\ev}_0|| e^{-\lambda t}$ for some $K,\lambda \in \mathbb{R}_{>0}$. That is, if $\dot{\ev}$ is differentiable there exists a continuously differentiable Lyapunov function $V: Q \times \mathbb{R}^n \rightarrow \mathbb{R}_{\geq 0}$ such that $\forall(\qv,\dot{\ev})\in Q \times \mathbb{R}^n$:
\begin{equation} \label{eq:lyapunov condition}
    k_1 || \dot{\ev}|| \leq V(\qv, \dot{\ev}) \leq k_2 || \dot{\ev}||,
\end{equation}
for some $k_1,k_2\in \mathbb{R}_{>0}$ such that $\forall(\qv,\dot{\ev},\dot{\qv},\ddot{\qv}_s)\in Q \times \mathbb{R}^n \times \mathbb{R}^n \times \mathbb{R}^n$ $\uv$ satisfies:
\begin{equation} \label{eq:controller condition}
    \dot{V}(\qv,\dot{\ev},\dot{\qv},\ddot{\qv}_s,\uv) \leq -\lambda V(\qv,\dot{\ev}).
\end{equation}
The following theorem proves that tracking the safe velocity achieves safety for the full dynamics if the parameter $\alpha$ is chosen small enough. In particular for a tracking controller satisfying the previous assumption stability translate into safety for the dynamic system (\ref{eq:dynamic model}) if $\lambda > \alpha$. 
\begin{theorem}\label{th:alpha limit}
    Consider system (\ref{eq:dynamic model}), safe set (\ref{eq:safe set}), and velocity tracking controller satisfying (\ref{eq:controller condition}). If $\lambda > \alpha$, safety is achieved such that $(\qv_0,\dot{\ev}_0)\in \mathcal{S}_V \Rightarrow \qv(t) \in \mathcal{S}, \forall t\geq 0$, where:
    \begin{align}
        &\mathcal{S}_V = \{ (\qv,\dot{\ev})\in Q \times \mathbb{R}^n: h_V(\qv,\dot{\ev})\geq 0 \},\\
        &h_V(\qv,\dot{\ev}) = -V(\qv,\dot{\ev})+ \alpha_e h(\qv), \label{eq:h_V}
    \end{align}
    with $\alpha_e = (\lambda - \alpha)k_1/C_h > 0$ and $C_h,k_1$ defined at (\ref{eq:safe set}) and (\ref{eq:lyapunov condition}).
\end{theorem}
\begin{proof}
    Since $V(q,\dot{\ev}) \geq 0$, the implication $h_V(\qv,\dot{\ev}) \geq 0 \rightarrow h(\qv) \geq 0$ holds. Thus it is sufficient to show that $h_V(\qv,\dot{\ev}) \geq 0$ to prove the theorem. By definition of the initial conditions $h_V(\qv_0,\dot{\ev}_0) \geq 0$ and also:
    \begin{equation*}
        \begin{split}
            \dot{h}_V&(\qv,\dot{\ev},\dot{\qv},\ddot{\qv}_s,\uv) = -\dot{V}(\qv,\dot{\ev},\dot{\qv},\ddot{\qv}_s,\uv) + \alpha_e \nabla h(\qv)\dot{\qv} \\
            & \geq \lambda V(\qv,\dot{\ev}) + \alpha_e \nabla h(\qv)\dot{\qv}_s + \alpha_e \nabla h(\qv) \dot{\ev} \\
            & \geq \lambda V(\qv,\dot{\ev})  - \alpha_e \alpha h(\qv) + \alpha_e \nabla h(\qv) \dot{\ev} \\
            & \geq (\lambda-\alpha) V(\qv,\dot{\ev}) - \alpha_e ||\nabla h(\qv)|| ||\dot{\ev}|| - \alpha h_V(\qv,\dot{\ev}) \\
            & \geq (\lambda-\alpha) k_1 ||\dot{\ev}|| - \alpha_e C_h ||\dot{\ev}|| - \alpha h_V(\qv,\dot{\ev}) \\
            & \geq - \alpha h_V(\qv,\dot{\ev}).
        \end{split}
    \end{equation*}
    where in the first line was used Equation (\ref{eq:h_V}), then Equation (\ref{eq:controller condition}) from the stability condition of the velocity controller and the definition for $\dot{\ev}$. For the next inequality Equation (\ref{eq:safety constraint}) was used, then again the definition for $h_V$, (\ref{eq:h_V}), together with the Cauchy-Schwarts inequality. For the second to last inequality the lower and upper bounds for respectively $V$, from (\ref{eq:lyapunov condition}), and for $||\nabla h(\qv)||$, from (\ref{eq:safe set}), were used. Lastly the definition for $\alpha_e$, from this theorem, was used. This guarantees $h_V(\qv(t),\dot{\ev}(t)) \geq 0, \forall t \geq 0$ by Theorem \ref{theorem1}.
\end{proof}
\textbf{Remark 1}: The parameter $\lambda$ depends on how well/fast the actual robot is able to track the safe velocities commands coming from the unicycle model. However, if the robot is able to exponentially track those safe velocities, then, such parameter exists, and therefore there exixts an $\alpha$ parameter such that $\alpha <\lambda$ and safety is achieved. It follows that, actually, $\lambda$ serves more as a tool for the theoretical proof of safety.\\ 
\\
Now consider that ideal exponential tracking of the safe velocity is not possible. To do this a bounded input disturbance $d$ can be considered. In the model-free approach presented this is particularly relevant because $d$ can capture the effects of modeling errors, meaning that velocity tracking can be implemented in a model-free fashion and $d$ can model the effects of such an approach. When the input disturbance is introduced instead of safety one can guarantee input-to-state safety (ISSf) which is the invariance of the larger set $S_d \supseteq S$:
\begin{equation} \label{eq:s d}
    \begin{split}
        &S_d = \{\qv \in Q: h_d(\qv)\geq 0 \},\\
        &h_d(\qv)=h(\qv) + \gamma(||d||_\infty  ),
    \end{split}
\end{equation}
where $\gamma$ is a class-$\mathcal{K}$ function to be specified. The dynamic extension of set $S_d$, $S_{V\,d}\supseteq S_V$ can be written as:
\begin{equation} \label{eq:s vd}
    \begin{split}
        &S_{V\,d} = \{(\qv,\dot{\ev})\in Q \times \mathbb{R}^n: h_{V\,d}(\qv,\dot{\ev})\geq 0\},\\
        &h_{V\,d}(\qv,\dot{\ev}) = h_V(\qv,\dot{\ev})+\gamma(||d||_\infty).
    \end{split}
\end{equation}
The following corollary shows that ISSf is guaranteed by input-to-state stable (ISS) tracking: $||\dot{\ev}(t)|| \leq M ||\dot{\ev}_0|| e^{-\lambda t}+\mu(||d||_\infty)$. For ISS instead of (\ref{eq:controller condition}) the tracking controller satisfies:
\begin{equation} \label{eq:controller condition disturbance}
    \dot{V}(\qv,\dot{\ev},\dot{\qv},\ddot{\qv}_s,\uv,d) \leq -\lambda V(\qv,\dot{\ev}) + \iota(||d||_{\infty}),
\end{equation}
for some class-$\mathcal{K}$ function $\iota$.
\begin{theorem}
    Consider system (\ref{eq:dynamic model}), sets $S_d$ and $S_{V\,d}$, in (\ref{eq:s d}) and (\ref{eq:s vd}), safe velocity satisfying (\ref{eq:safety constraint}), and velocity tracking controller satisfying (\ref{eq:controller condition disturbance}). If $\lambda > \alpha$, input-to-state safety is achieved such that $(\qv_0,\dot{\ev}_0) \in S_{V\,d} \rightarrow \qv(t) \in S_d, \forall t \geq 0$, where $\alpha_e$ is given in Theorem \ref{th:alpha limit} and $\gamma(||d||_\infty)=\iota(||d||_\infty)/\alpha$.
\end{theorem}
The proof follows the same steps as in Theorem \ref{th:alpha limit}, by replacing $h$ and $h_V$ with $h_d$ and $h_{V\,d}$. This corollary implies that input-to-state stable tracking of a safe velocity translate to input-to-state safety for the full system.\\
\\
We can now show a velocity tracking controller that provides ISS by (\ref{eq:controller condition disturbance}). As the simplest choice we take a model-free controller:
\begin{equation} \label{eq:mf controller}
    \uv = -K_d \dot{\ev},
\end{equation}
where $K_d \in \mathbb{R}^{m \times n}$ is selected so that $K=B K_d$ is positive definite. This controller can be characterized by the constant $\lambda \in \mathbb{R}_{>0}$:
\begin{equation} \label{eq:lambda}
    \lambda = \frac{\sigma_{\min}(K)}{\sup_{\qv \in Q} \sigma_{\max}(M(\qv))},
\end{equation}
where $\sigma_{\min}$ and $\sigma_{\max}$ denote the smallest and largest eigenvalues. The eigenvalues are positive real numbers since $M(\qv)$ and $K$ are positive definite. Accordingly, $\lambda$ characterizes how fast a controller may track the desired velocity since representes the smallest gain divided by the largest inertia. The proposed controller can be associated with the the Lyapunov function candidate:
\begin{equation} \label{eq:lyapunov candidate}
    V(\qv,\dot{\ev}) = \sqrt{\frac{1}{2} \dot{\ev}^T M(\qv) \dot{\ev}},
\end{equation}
that has the bound (\ref{eq:lyapunov condition}) with 
\begin{equation} 
    k_1= \inf_{\qv \in Q} \sqrt{\sigma_{\min} (M(\qv))/2}, \;\;\;\; k_2= \sup_{\qv \in Q} \sqrt{\sigma_{\max} (M(\qv))/2}.
\end{equation}
The linear class-$\mathcal{K}$ function $\iota$ can also be defined as $\iota(||d||_\infty)=||d||_\infty / (2 k_1)$. With the reported controller the parameters to be selected during control design are $\alpha$ and $K_D$. Now it can be shown that the controller satisfies the required stability properties.
\begin{theorem}
    Consider system (\ref{eq:dynamic model}), Lyapunov function V (\ref{eq:lyapunov candidate}), constant $\lambda$ given by (\ref{eq:lambda}) and $\dot{\ev} \neq 0$. Then controller (\ref{eq:mf controller}) satisfies the ISS condition (\ref{eq:controller condition disturbance}) with respect to $d = -M(\qv)\ddot{\qv}_s-N(\qv,\dot{\qv},\dot{\qv}_s)$.
\end{theorem}